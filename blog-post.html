<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Blog Post</title>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Blog Post Title" id="og-title" />
    <meta
      property="og:description"
      content="Description of the blog post."
      id="og-description"
    />
    <meta
      property="og:url"
      content="https://lixxie.xyz/blog-post?post=post-id"
      id="og-url"
    />
    <meta property="og:type" content="article" />
    <meta
      property="og:image"
      content="https://lixxie.xyz/images/Icons/web_badge2.gif"
      id="og-image"
    />
    <meta
      property="og:image:alt"
      content="Image description"
      id="og-image-alt"
    />

    <link rel="stylesheet" href="/css/blog-styles.css" />
    <script src="/js/blog-post.js" defer></script>
  </head>
  <body>
    <header>
      <nav class="navbar">
        <ul>
          <div style="width: fit-content; margin: 0 auto">
            <li><a href="index.html">[ Home ]</a></li>
            <li><a href="Projects.html">[ Projects ]</a></li>
            <li><a href="blog.html">[ Blog ]</a></li>
          </div>
        </ul>
      </nav>
    </header>
    <main>
      <div id="post-content"></div>
    </main>
    <footer></footer>

    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get("post");
        const baseDomain = "https://lixxie.xyz"; // Update to your domain

        try {
          // Fetch the post data
          const postResponse = await fetch(
            `${baseDomain}/posts/${postId}.json`
          );
          const post = await postResponse.json();

          // Update the page title
          document.getElementById("page-title").innerText =
            post.title || "No Title";

          // Update Open Graph meta tags
          document
            .getElementById("og-title")
            .setAttribute("content", post.title || "No Title");
          document
            .getElementById("og-description")
            .setAttribute(
              "content",
              (post.content || "").substring(0, 150) + "..."
            );
          document
            .getElementById("og-url")
            .setAttribute(
              "content",
              `${baseDomain}/blog-post?post=${encodeURIComponent(postId)}`
            );
          document
            .getElementById("og-image")
            .setAttribute("content", post.bannerImage || "default-image.jpg");
          document
            .getElementById("og-image-alt")
            .setAttribute("content", post.title || "No Title");

          // Render the post content
          const postContent = `
                    <div class="post-header">
                        <img src="${
                          post.bannerImage
                        }" alt="Banner Image" class="banner-image" />
                        <h1>${post.title || "No Title"}</h1>
                        <p>Date: ${post.date || "No Date"}</p>
                    </div>
                    <div class="post-body">
                        ${post.content || "Content not available."}
                    </div>
                    <div class="tags">
                        ${
                          post.tags
                            ? post.tags
                                .map((tag) => `<span class="tag">${tag}</span>`)
                                .join("")
                            : ""
                        }
                    </div>
                `;

          document.getElementById("post-content").innerHTML = postContent;
        } catch (error) {
          console.error("Error loading post:", error);
        }
      });
    </script>
  </body>
</html>
